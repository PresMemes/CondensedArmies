# This bit of script allows me to check for various conditions so I can hide condensed armies, preventing them from cluttering the army screen
# This is also used to keep the AI from spamming nothing but condensed armies and for the mod menu
# Scope: this = country
# Parameters: PMCA_MULT (ten, hundred), PMCA_RESOURCE, PMCA_VALUE
pmca_materiel_policy_check = {
	optimize_memory
	has_policy_flag = pmca_times_$PMCA_MULT$_set
	resource_stockpile_compare = {
		resource = $PMCA_RESOURCE$
		value >= $PMCA_VALUE$
	}
	OR = {
		is_ai = no
		AND = {
			has_global_flag = pmca_ai_allowed
			count_owned_army = {
				count >= @armies_for_declaring_war #PM: Make sure the AI has enough regular armies before looking for condensed ones
				limit = {
					is_defensive_army = no
				}
			}
		}
	}
}

pmca_acot_check = {
	optimize_memory
	#PM: This checks for either: A) ACOT is NOT activated and the army should always be shown or B) ACOT is activated and the army should be hidden if you've researched a better tech tier
	OR = {
		NOT = { has_global_flag = acot_activated }
		AND = {
			is_ai = no
			NOT = { has_technology = $PMCA_ACOT_TECH$ }
		}
		is_ai = yes
	}
}

pmca_can_build_undead_armies = {
	optimize_memory
	OR = {
		has_valid_civic = civic_reanimated_armies
		has_valid_civic = civic_hive_reanimated_armies #PM: Hive Reanimators
	}
}